# 7. 확장들

HTTP/2 프로토콜은 수신자가 알 수 없는 모든 프레임(알려지지 않은 프레임 유형을 가진 것들)을 읽고 무시해야 한다고 규정합니다. 두 당사자는 홉 단위로 새로운 프레임 유형의 사용을 합의할 수 있지만, 이러한 프레임들은 상태 변경이 허용 되지 않으며 흐름 제어되지 않습니다.

HTTP/2가 확장을 허용해야 하는지에 대한 주제는 프로토콜 개발 동안 길게 논의되었으며, 찬성과 반대 의견이 오갔습니다. draft-12 이후 마지막으로 의견의 흐름이 한 번 더 바뀌었고 결국 확장이 허용되었습니다.

확장 기능은 실제 프로토콜의 일부가 아니지만 핵심 프로토콜 사양 외부에 문서화될 예정입니다. 이미 프로토콜에 포함하기 위해 논의된 두 가지 프레임 유형이 있는데, 아마도 확장으로 보내지는 첫 번째 프레임이 될 것입니다. 여기서는 인기있고, "네이티브" 프레임처럼 사용되던 두 가지 프레임에 대해 설명하겠습니다:

## 7.1. 대체 서비스

HTTP/2의 채택으로 TCP 연결이 훨씬 더 길어지고 HTTP 1.x 연결보다 훨씬 더 오래 유지될 것이라고 예상하는 이유가 있습니다. 클라이언트는 각 호스트/사이트에 대해 단일 연결로 원하는 많은 작업을 수행할 수 있으며, 이 연결은 상당한 시간 동안 열릴 수 있습니다.

이는 HTTP 로드 밸런서의 작동 방식에 영향을 미칠 것이며, 사이트가 클라이언트에게 다른 호스트에 연결하도록 제안하고 싶어하는 상황이 발생할 수 있습니다. 이는 성능상의 이유이거나 사이트가 유지보수를 위해 중단되는 경우 등일 수 있습니다.

서버는 [Alt-Svc 헤더](https://tools.ietf.org/html/rfc7838) (또는 HTTP/2의 ALTSVC 프레임)를 보내 클라이언트에 대체 서비스를 알립니다: 동일한 콘텐츠에 대해 다른 서비스, 호스트 및 포트 번호를 사용하는 다른 경로입니다.

그런 다음 클라이언트는 그 서비스에 비동기적으로 연결을 시도하고 새 연결이 성공할 경우에만 대체 서비스를 사용해야 합니다.

### 7.1.1. Opportunistic TLS

Alt-Svc 헤더는 http://를 통해 콘텐츠를 제공하는 서버가 동일한 콘텐츠가 TLS 연결을 통해서도 사용할 수 있다는 정보를 클라이언트에게 알릴 수 있습니다.

이것은 다소 논란이 있는 기능입니다. 이러한 연결은 인증되지 않은 TLS를 수행하고 UI에서 “안전하다”고 광고되지 않으며, 어떤 자물쇠도 사용되지 않고, 사실 이것이 단순한 구식 HTTP가 아니라는 것을 사용자에게 알릴 방법이 없습니다. 그러나 이것은 여전히 기회주의적 TLS이며, 일부 사람들은 이 개념에 매우 강하게 반대합니다.

## 7.2. Blocked

이 유형의 프레임은 HTTP/2 당사자가 데이터를 보내고자 하지만 흐름 제어가 데이터 전송을 금지할 때 정확히 한 번 보내기 위해 의도된 것입니다. 이 아이디어는 당신의 구현이 이 프레임을 받았을 때, 당신이 뭔가를 잘못 처리했거나/또는 완벽하지 않은 전송 속도를 얻고 있다는 것을 알 수 있습니다.

draft-12에서 이 프레임이 확장으로 이동하기 전의 인용:

> "BLOCKED 프레임은 실험을 용이하게 하기 위해 이 초안 버전에 포함되어 있습니다. 실험 결과가 긍정적인 피드백을 제공하지 않는 경우, 제거될 수 있습니다."